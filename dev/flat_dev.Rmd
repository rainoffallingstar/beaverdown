---
title: "flat_dev.Rmd for working package"
output: html_document
editor_options: 
  chunk_output_type: console
---

<!-- Run this 'development' chunk -->
<!-- Store every call to library() that you need to explore your functions -->

```{r development, include=FALSE}
library(testthat)
```

<!--
 You need to run the 'description' chunk in the '0-dev_history.Rmd' file before continuing your code there.

If it is the first time you use {fusen}, after 'description', you can directly run the last chunk of the present file with inflate() inside.
--> 

```{r development-load}
# Load already included functions if relevant
pkgload::load_all(export_all = FALSE)
```

# placeholder
    
```{r function-placeholder}
#' placeholder
#' 
#' creat a dir that is not empty
#' @param path char,a dir to be make
#' @return path
#' 
#' @export
placeholder <- function(path){
    fs::dir_create(path = path)
  writeLines("",con = paste0(path,"/place.holder"))
  return(path)
}
```
  
```{r example-placeholder}
placeholder("testtemp")
fs::dir_delete("testtemp")
```
  
```{r tests-placeholder}
test_that("placeholder works", {
  expect_true(inherits(placeholder, "function")) 
})
```
  
# docker_install
    
```{r function-docker_install}
#' docker_install
#' 
#' install docker in linux systems
#' @param system linux,macos,windows
#' @return null
#' 
#' @export
docker_install <- function(system){
  if (system == "linux"){
    message("Note,install docker for linux servers")
  system("sudo wget -qO- https://github.com/rainoffallingstar/beaverdown/blob/main/dev/docker_install.sh | bash
")
  }else if(system == "macos"){
    system("brew install docker docker-compose")
  }else{
    system("winget install Docker.DockerDesktop")
  }
  
}
```
  
```{r example-docker_install}

```
  
```{r tests-docker_install}
test_that("docker_install works", {
  expect_true(inherits(docker_install, "function")) 
})
```
  
# minikube_install
    
```{r function-minikube_install}
#' minikube_install
#' 
#' install minikube
#' @param system linux,macos,windows
#' @return null
#' 
#' @export
minikube_install <- function(system = c("linux","macos","windows")){
  if (system == "linux"){
    message("Note,install minikube for linux servers")
  system("sudo wget -qO- https://github.com/rainoffallingstar/beaverdown/blob/main/dev/minikube_install.sh | bash
")
  }else if (system == "macos"){
  system("brew install minikube")
  } else {
  system("winget install Kubernetes.minikube")
}
  
}
```
  
```{r example-minikube_install}

```
  
```{r tests-minikube_install}
test_that("minikube_install works", {
  expect_true(inherits(minikube_install, "function")) 
})
```
  
# minikube_start
    
```{r function-minikube_start}
#' minikube_start
#' 
#' start a cluster by minikube
#' 
#' @return null
#' 
#' @export
minikube_start <- function(){
    system("minikube start")
}
```
  
```{r example-minikube_start}

```
  
```{r tests-minikube_start}
test_that("minikube_start works", {
  expect_true(inherits(minikube_start, "function")) 
})
```
  
# kubectl_install
    
```{r function-kubectl_install}
#' kubectl_install
#' 
#' install kubectl in linux
#' @param system linux,macos,windows
#' @return null
#' 
#' @export
kubectl_install <- function(system = c("linux","macos","windows")){
  if (system == "linux"){
    system("curl -LO 'https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl'  && sudo install -o root -g root -m 0755 kubectl /usr/local/bin/kubectl ")
  } else if (system == "macos"){
    system("brew install kubectl
")
  } else if (system == "windows"){
    system("winget install -e --id Kubernetes.kubectl
")
  }
    
}
```
  
```{r example-kubectl_install}

```
  
```{r tests-kubectl_install}
test_that("kubectl_install works", {
  expect_true(inherits(kubectl_install, "function")) 
})
```
  

<!--
# There can be development actions

Create a chunk with 'development' actions

- The chunk needs to be named `development` or `dev`
- It contains functions that are used for package development only
- Note that you may want to store most of these functions in the 0-dev_history.Rmd file

These are only included in the present flat template file, their content will not be part of the package anywhere else.
-->

```{r development-inflate, eval=FALSE}
# Keep eval=FALSE to avoid infinite loop in case you hit the knit button
# Execute in the console directly
fusen::inflate(flat_file = "dev/flat_dev.Rmd", vignette_name = "Get started")
```


# Inflate your package

You're one inflate from paper to box.
Build your package from this very Rmd using `fusen::inflate()`

- Verify your `"DESCRIPTION"` file has been updated
- Verify your function is in `"R/"` directory
- Verify your test is in `"tests/testthat/"` directory
- Verify this Rmd appears in `"vignettes/"` directory
